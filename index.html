<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CRM Estudiantes PRO</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    :root { --fondo: #f8f9fa; --texto: #212529; --card: #ffffff; }
    body.dark { --fondo: #1e1e28; --texto: #e1e1e8; --card: #2a2a3b; }
    body { background: var(--fondo); color: var(--texto); }
    .card, table { background: var(--card) !important; }
    .table-danger { background-color: #f8d7da !important; }
    .table-warning { background-color: #fff3cd !important; }
    .chip { display:inline-block; background:#e2e3e5; border-radius:12px; padding:2px 8px; font-size:0.8rem; margin:2px; }
    #historial { max-height: 250px; overflow:auto; }
  </style>
</head>
<body class="container py-4">
  <div class="d-flex justify-content-between align-items-start flex-wrap mb-3">
    <h1 class="mb-2">CRM Estudiantes PRO</h1>
    <div class="d-flex gap-2 mb-2">
      <button class="btn btn-outline-secondary" id="toggleDark">ðŸŒ™</button>
    </div>
  </div>

  <div class="row g-3 mb-2">
    <div class="col-md-3">
      <input type="text" id="buscador" class="form-control" placeholder="Buscar por nombre o correo" />
    </div>
    <div class="col-md-2">
      <select id="filtroEstado" class="form-select"><option value="">â€” Filtrar por estado â€”</option></select>
    </div>
    <div class="col-md-2">
      <select id="filtroCurso" class="form-select"><option value="">â€” Filtrar por curso â€”</option></select>
    </div>
    <div class="col-md-2">
      <select id="filtroEtiqueta" class="form-select"><option value="">â€” Filtrar por etiqueta â€”</option></select>
    </div>
    <div class="col-md-3 d-flex gap-2">
      <input type="file" id="inputCSV" accept=".csv" class="form-control form-control-sm" />
      <button class="btn btn-success" id="exportCSV">Exportar CSV</button>
      <button class="btn btn-primary" id="exportPDF">Exportar PDF</button>
    </div>
  </div>

  <div class="card mb-3">
    <div class="card-body">
      <form id="formulario" class="row g-3">
        <div class="col-md-3"><input type="text" id="nombre" class="form-control" placeholder="Nombre" required /></div>
        <div class="col-md-3"><input type="email" id="correo" class="form-control" placeholder="Correo" required /></div>
        <div class="col-md-2"><input type="tel" id="telefono" class="form-control" placeholder="TelÃ©fono" /></div>
        <div class="col-md-2"><input type="text" id="curso" class="form-control" placeholder="Curso o carrera" required /></div>
        <div class="col-md-2">
          <select id="estado" class="form-select" required>
            <option value="">Estado</option>
            <option value="Primer contacto">ðŸŸ¡ Primer contacto</option>
            <option value="Interesado">ðŸŸ  Interesado</option>
            <option value="EvaluaciÃ³n">ðŸ”µ En evaluaciÃ³n</option>
            <option value="Matriculado">ðŸŸ¢ Matriculado</option>
            <option value="Egresado">âšª Egresado</option>
          </select>
        </div>
        <div class="col-md-2"><input type="date" id="proximoSeguimiento" class="form-control" /></div>
        <div class="col-md-4"><input type="text" id="etiquetas" class="form-control" placeholder="Etiquetas (coma separadas)" /></div>
        <div class="col-12 text-end"><button type="submit" class="btn btn-primary">Agregar / Actualizar</button></div>
      </form>
    </div>
  </div>

  <div class="mb-3">
    <h5>Seguimientos urgentes / prÃ³ximos</h5>
    <div id="panelSeguimientos" class="mb-1"></div>
    <div>Total visibles: <strong id="contador">0</strong></div>
  </div>

  <div class="table-wrap mb-4">
    <table class="table table-bordered table-hover align-middle" id="tabla">
      <thead class="table-light">
        <tr>
          <th>Nombre</th><th>Correo</th><th>TelÃ©fono</th><th>Curso</th>
          <th>Estado</th><th>PrÃ³ximo seguimiento</th><th>Etiquetas</th><th>Acciones</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <div class="row mb-4">
    <div class="col-md-6">
      <h5>Estudiantes por estado</h5>
      <canvas id="graficoEstado"></canvas>
    </div>
    <div class="col-md-6">
      <h5>Estudiantes por curso</h5>
      <canvas id="graficoCurso"></canvas>
    </div>
  </div>

  <div class="mb-4">
    <h5>Historial de cambios</h5>
    <ul id="historial" class="list-group"></ul>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="script.js"></script>
</body>
</html>
